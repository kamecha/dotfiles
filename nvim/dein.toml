# plugin manager
[[plugins]]
repo = 'Shougo/dein.vim'

# profile vim startup time
[[plugins]]
repo = 'dstein64/vim-startuptime'

# LSP
[[plugins]]
repo = 'neovim/nvim-lspconfig'
lua_add = '''
vim.keymap.set('n', '<space>e', vim.diagnostic.open_float)
vim.keymap.set('n', '[d', vim.diagnostic.goto_prev)
vim.keymap.set('n', ']d', vim.diagnostic.goto_next)
vim.keymap.set('n', '<space>q', vim.diagnostic.setloclist)
-- Use LspAttach autocommand to only map the following keys
-- after the language server attaches to the current buffer
vim.api.nvim_create_autocmd('LspAttach', {
  group = vim.api.nvim_create_augroup('UserLspConfig', {}),
  callback = function(ev)
    -- Enable completion triggered by <c-x><c-o>
    -- vim.bo[ev.buf].omnifunc = 'v:lua.vim.lsp.omnifunc'

    -- Buffer local mappings.
    -- See `:help vim.lsp.*` for documentation on any of the below functions
    local opts = { buffer = ev.buf }
    vim.keymap.set('n', 'gD', vim.lsp.buf.declaration, opts)
    vim.keymap.set('n', 'gd', vim.lsp.buf.definition, opts)
    vim.keymap.set('n', 'K', vim.lsp.buf.hover, opts)
    vim.keymap.set('n', 'gi', vim.lsp.buf.implementation, opts)
    vim.keymap.set('n', '<C-k>', vim.lsp.buf.signature_help, opts)
    vim.keymap.set('n', '<space>wa', vim.lsp.buf.add_workspace_folder, opts)
    vim.keymap.set('n', '<space>wr', vim.lsp.buf.remove_workspace_folder, opts)
    vim.keymap.set('n', '<space>wl', function()
      print(vim.inspect(vim.lsp.buf.list_workspace_folders()))
    end, opts)
    vim.keymap.set('n', '<space>D', vim.lsp.buf.type_definition, opts)
    vim.keymap.set('n', '<space>rn', vim.lsp.buf.rename, opts)
    vim.keymap.set('n', '<space>ca', vim.lsp.buf.code_action, opts)
    vim.keymap.set('n', 'gr', vim.lsp.buf.references, opts)
    vim.keymap.set('n', '<space>f', function()
      vim.lsp.buf.format { async = true }
    end, opts)
  end,
})
'''
lua_source = '''
vim.lsp.handlers["textDocument/hover"] = vim.lsp.with(
	vim.lsp.handlers.hover, {
	   -- Use a sharp border with `FloatBorder` highlights
		border = "single",
	   -- add the title in hover float window
		title = "hover"
	}
)
vim.lsp.handlers["textDocument/signatureHelp"] = vim.lsp.with(
	vim.lsp.handlers.signature_help, {
	-- Use a sharp border with `FloatBorder` highlights
	border = "single"
	}
)
'''

[[plugins]]
repo = 'williamboman/mason.nvim'
lua_source = '''
require('mason').setup()
'''

[[plugins]]
repo = 'williamboman/mason-lspconfig.nvim'
depends = ['nvim-lspconfig', 'mason.nvim']
lua_source = '''
local nvim_lsp = require("lspconfig")
local mason_lspconfig = require('mason-lspconfig')
local navic = require("nvim-navic")
local capabilities = vim.lsp.protocol.make_client_capabilities()
capabilities.textDocument.completion.completionItem.snippetSupport = true
mason_lspconfig.setup_handlers({ function(server_name)
	local opts = {
		on_attach = function(client, bufnr)
			if client.server_capabilities.documentSymbolProvider then
				navic.attach(client, bufnr)
			end
		end,
		capabilities = capabilities
	}
	nvim_lsp[server_name].setup(opts)
end })
'''

[[plugins]]
repo = 'SmiteshP/nvim-navic'

# LSP„ÅÆ„É©„ÉÉ„Éë„Éº
[[plugins]]
repo = 'jose-elias-alvarez/null-ls.nvim'
lua_source = '''
-- settting for null-ls to use textlint
local null_ls = require("null-ls")
null_ls.setup({
	sources = {
		null_ls.builtins.diagnostics.textlint.with({
			filetypes = { "markdown", "text", "tex" },
			condition = function(utils)
				return utils.root_has_file({
					".textlintrc",
					".textlintrc.json",
					".textlintrc.yaml",
					".textlintrc.yml",
					".textlintrc.js",
				})
			end,
		})
	},
})
'''

# null-ls„Åß‰Ωø„ÅÜ„Çâ„Åó„ÅÑ
[[plugins]]
repo = 'nvim-lua/plenary.nvim'

# „Ç§„É≥„Çπ„Éà„Éº„É´„ÅÆUI
[[plugins]]
repo = 'j-hui/fidget.nvim'
rev = 'legacy'
lua_add = '''
vim.api.nvim_create_autocmd('LspAttach', {
	once = true,
	callback = function()
		require('fidget').setup({
			text = {
				spinner = 'moon',
			},
		})
	end,
})
'''
lua_source = '''
require('fidget').setup({})
'''

[[plugins]]
repo = 'folke/neodev.nvim'
lua_source = '''
require("neodev").setup({})
'''

# deno
[[plugins]]
repo = 'vim-denops/denops.vim'
on_event = 'CursorHold'

# „Çø„Éº„Éü„Éä„É´„ÇíËâØ„ÅÑÊÑü„Åò„Å´„Åô„Çã
[[plugins]]
repo = 'akinsho/toggleterm.nvim'
rev = '*'

[[plugins]]
repo = 'voldikss/vim-floaterm'
hook_add = '''
let g:floaterm_width = 0.9
let g:floaterm_height = 0.9
nnoremap <silent> <F8> :FloatermNew<CR>
nnoremap <silent> <F9> :FloatermToggle<CR>
tnoremap <silent> <F9> <C-\><C-n>:FloatermToggle<CR>
'''

# AIË£úÂÆå
[[plugins]]
repo = 'github/copilot.vim'

[[plugins]]
repo = 'nvim-telescope/telescope.nvim'
depends = ['plenary.nvim']
merged = '0'
lua_source = '''
require('telescope').setup({})
'''

# helpÊó•Êú¨Ë™û
[[plugins]]
repo = 'vim-jp/vimdoc-ja'
hook_source = 'set helplang=ja,en'

# ÁøªË®≥
[[plugins]]
repo = 'skanehira/denops-translate.vim'

# gcc„Åß„Ç≥„É°„É≥„Éà„Ç¢„Ç¶„Éà
[[plugins]]
repo = 'numToStr/Comment.nvim'
lua_source = '''
require('Comment').setup()
'''

# ÈÉ®ÂàÜÁ∑®ÈõÜ
[[plugins]]
repo = 'thinca/vim-partedit'

# fontÂë®„Çä„ÅÆË®≠ÂÆö(nerd font„Å®„Åã)
[[plugins]]
repo = 'nvim-tree/nvim-web-devicons'
rev = 'nerd-v2-compat'

[[plugins]]
repo = 'utilyre/barbecue.nvim'
depends = [ 'SmiteshP/nvim-navic', 'nvim-tree/nvim-web-devicons' ]
lua_source = '''
require('barbecue').setup({
	separator = " ÓÇ± ",
	icons_enabled = true,
	icons = {
		default = "ÔÉ∂",
		symlink = "ÔíÅ",
		git = "Óú•",
		folder = "ÔÅª",
		["folder-open"] = "ÔÅº",
	},
})
'''

[[plugins]]
repo = 'nvim-lualine/lualine.nvim'
hook_add = '''
set laststatus=3
'''
lua_source = '''
local navic = require("nvim-navic")
navic.setup({
	highlight = true,
	separator = " ÓÇ± ",
})

local lsp_names = function()
	local clients = {}
	for _, client in ipairs(vim.lsp.get_active_clients { bufnr = 0 }) do
		if client.name == 'null-ls' then
			local sources = {}
			for _, source in ipairs(require('null-ls.sources').get_available(vim.bo.filetype)) do
				table.insert(sources, source.name)
			end
			table.insert(clients, 'null-ls(' .. table.concat(sources, ', ') .. ')')
		else
			table.insert(clients, client.name)
		end
	end
	local denops_status = vim.fn['denops#server#status']()
	if denops_status ~= '' then
		table.insert(clients, "D:" .. denops_status)
	end
	return 'Óûô ' .. table.concat(clients, ', ')
end

require('lualine').setup({
	options = {
		globalstatus = true,
		disabled_filetypes = {
			winbar = {
				"netrw",
			}
		}
	},
	sections = {
		lualine_c = {
			{
				"filename",
			}
		},
		lualine_x = {
			lsp_names
		},
		lualine_y = {
			'encoding',
			'fileformat',
			'filetype',
		},
		lualine_z = {
			{
				"progress",
			},
			{
				"location"
			}
		}
	},
})
'''

# „Çø„Éñ„É©„Ç§„É≥
[[plugins]]
repo = 'nanozuki/tabby.nvim'
hook_add = '''
set showtabline=2
'''
lua_source = '''
local theme = {
	fill = 'TabLineFill',
	head = 'TabLine',
	current_tab = 'TabLineSel',
	tab = 'TabLine',
	win = 'TabLine',
	tail = 'TabLine',
}

require('tabby.tabline').set(function(line)
	return {
		{
			{ ' ÓüÖ ', hl = theme.head },
			line.sep('ÓÇ∞', theme.head, theme.fill),
		},
		line.tabs().foreach(function(tab)
			if tab.is_current() then
				return {
					line.sep('ÓÇ∞', theme.fill, theme.current_tab),
				tab.is_current() and 'ÔÜí' or 'ÔÑå',
					tab.number(),
					tab.name(),
					tab.close_btn('ÔÄç'),
					line.sep('ÓÇ∞', theme.current_tab, theme.fill),
					hl = theme.current_tab,
					margin = ' ',
				}
			else
				return {
					line.sep('ÓÇ∞', theme.fill, theme.tab),
				tab.is_current() and 'ÔÜí' or 'ÔÑå',
					tab.number(),
					tab.name(),
					tab.close_btn('ÔÄç'),
					line.sep('ÓÇ∞', theme.tab, theme.fill),
					hl = theme.tab,
					margin = ' ',
				}
			end
		end),
		line.spacer(),
		line.wins_in_tab(line.api.get_current_tab()).foreach(function(win)
			return {
				line.sep('ÓÇ≤', theme.win, theme.fill),
				win.is_current() and 'ÔÜí' or 'ÔÑå',
				win.buf_name(),
				line.sep('ÓÇ≤', theme.fill, theme.win),
				hl = theme.win,
				margin = ' ',
			}
		end),
		{
			line.sep('ÓÇ≤', theme.tail, theme.fill),
			{ ' ÔÉ∂ ', hl = theme.tail },
		},
		hl = theme.fill,
	}
end, {
		tab_name = {
			name_fallback = function(tabid)
				return ""
			end
		}
})
'''

#  popupÁ≠â„ÅÆË£úÂä©ÊÉÖÂ†±„ÅÆË°®Á§∫
[[plugins]]
repo = 'matsui54/denops-popup-preview.vim'
depends = 'denops.vim'

# git branch
[[plugins]]
repo = 'itchyny/vim-gitbranch'

# „Ç´„ÉÉ„Ç≥Ë£úÂÆå
[[plugins]]
repo = 'cohama/lexima.vim'

# surround
[[plugins]]
repo = 'tpope/vim-surround'

# BadApple
[[plugins]]
repo = 'skanehira/badapple.vim'

# markdown„ÅÆ„Éó„É¨„Éì„É•„Éº
[[plugins]]
repo = 'iamcco/markdown-preview.nvim'
on_ft = ['markdown', 'pandoc.markdown', 'rmd']
build = 'cd app && yarn install'

# color„ÅÆ„Éó„É¨„Éì„É•„Éº
[[plugins]]
repo = 'gko/vim-coloresque'

# color scheme
[[plugins]]
repo = 'EdenEast/nightfox.nvim'

[[plugins]]
repo = 'sainnhe/edge'
hook_add = '''
if has('termguicolors')
	set termguicolors
endif
let g:edge_style = 'aura'
let g:edge_better_performance = 1
'''

# UI
[[plugins]]
repo = 'folke/noice.nvim'
depends = ['nui.nvim']
lua_source = '''
-- settting for nocie.vim
require('noice').setup {
	cmdline = {
		enabled = true,
		view = "cmdline_popup",
		format = {
			cmdline = { icon = ">" },
			search_down = { icon = "üîç‚åÑ" },
			search_up = { icon = "üîç‚åÉ" },
			filter = { icon = "$" },
			lua = { icon = "‚òæ" },
			help = { icon = "?" },
		},
	},
	popupmenu = {
		enabled = true,
		view = "pum",
	},
	lsp = {
		progress = {
			enabled = false
		}
	}
}
'''

# UI Component Library for Neovim
[[plugins]]
repo = 'MunifTanjim/nui.nvim'

# notification manager for Neovim
[[plugins]]
repo = 'rcarriga/nvim-notify'
lua_source = '''
require('notify').setup({
	render = "minimal",
	timeout = 1000,
	})
vim.notify = require('notify')
'''

# tree-sitter
[[plugins]]
repo = 'nvim-treesitter/nvim-treesitter'
merged = '0'
lua_source = '''
require('nvim-treesitter.configs').setup {
	ensure_installed = { 'lua', 'vim' },
	highlight = {
		enable = true,
		disable = {
			"ddu-ff",
			"ddu-ff-filter",
		},
	},
	indent = {
		enable = true,
		disable = {
			"ddu-ff",
			"ddu-ff-filter",
			"html",
		},
	},
}
local vim = vim
local opt = vim.opt

opt.foldmethod = 'expr'
opt.foldexpr = 'nvim_treesitter#foldexpr()'
'''

[[plugins]]
repo = 'nvim-treesitter/nvim-treesitter-textobjects'
depends = 'nvim-treesitter'
on_lua = ['nvim-treesitter']
lua_source = '''
require'nvim-treesitter.configs'.setup {
	textobjects = {
		select = {
			enable = true,
			lookahead = true,
			keymaps = {
				["af"] = "@function.outer",
				["if"] = "@function.inner",
				["ac"] = "@class.outer",
				["ic"] = "@class.inner",
				["ab"] = "@block.outer",
				["ib"] = "@block.inner",
				["aF"] = "@frame.outer",
				["iF"] = "@frame.inner",
			},
		},
	}
}
'''

[[plugins]]
repo = 'nvim-treesitter/playground'

[[plugins]]
repo = 'tyru/open-browser.vim'

[[plugins]]
repo = 'kamecha/traqVimPractice'
[plugins.ftplugin]
traqvim = '''
setlocal noswapfile
nnoremap <buffer><silent> r
			\ :TraqReload<CR>
nnoremap <buffer><silent> o
			\ :TraqMessageOpen<CR>
'''
traqvim-message = '''
nnoremap <buffer><silent> s
			\ :TraqMessageSend<CR>
'''

# help
[[plugins]]
repo = 'LeafCage/vimhelpgenerator'

# git
[[plugins]]
repo = 'lambdalisue/gina.vim'
hook_add = '''
nnoremap [Gina] <Nop>
nmap <space>g [Gina]
nmap <silent> [Gina]s :Gina status<CR>
nmap <silent> [Gina]c :Gina commit<CR>
nmap <silent> [Gina]l :Gina log --graph --all<CR>
nmap <silent> [Gina]b :Gina branch --all<CR>
'''
[plugins.ftplugin]
gina-log = '''
setlocal cursorline
'''

[[plugins]]
repo = 'lewis6991/gitsigns.nvim'
lua_source = '''
require('gitsigns').setup()
'''

# GitHub
[[plugins]]
repo = 'skanehira/denops-gh.vim'

# QuickFix„Çí‰∏ÄÊã¨ÁΩÆÊèõ
[[plugins]]
repo = 'thinca/vim-qfreplace'

# QuickFix„ÇíÁ∑®ÈõÜ
[[plugins]]
repo = 'itchyny/vim-qfedit'

# skk„ÅÆËæûÊõ∏
[[plugins]]
repo = 'skk-dev/dict'

# Êó•Êú¨Ë™ûÊ§úÁ¥¢„Çí„É≠„Éº„ÉûÂ≠ó„Åß
[[plugins]]
repo = 'lambdalisue/kensaku.vim'

# <C-a> <C-x>„Çí‰Ωø„ÅÑÊòì„Åè„Åô„Çã
[[plugins]]
repo = 'monaqa/dial.nvim'
hook_add = '''
nmap  <C-a>  <Plug>(dial-increment)
nmap  <C-x>  <Plug>(dial-decrement)
nmap g<C-a> g<Plug>(dial-increment)
nmap g<C-x> g<Plug>(dial-decrement)
vmap  <C-a>  <Plug>(dial-increment)
vmap  <C-x>  <Plug>(dial-decrement)
vmap g<C-a> g<Plug>(dial-increment)
vmap g<C-x> g<Plug>(dial-decrement)
'''
lua_source = '''
local augend = require("dial.augend")
require("dial.config").augends:register_group {
	default = {
		augend.constant.alias.bool,
		augend.constant.alias.ja_weekday,
		augend.constant.alias.ja_weekday_full,
	}
}
'''

# Á∞°ÊòìÂÆüË°å
[[plugins]]
repo = 'thinca/vim-quickrun'

# session
[[plugins]]
repo = 'rmagatti/auto-session'

# „Ç´„É¨„É≥„ÉÄ„Éº
[[plugins]]
repo = 'itchyny/calendar.vim'
